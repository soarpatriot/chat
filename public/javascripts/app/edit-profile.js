// Generated by CoffeeScript 1.6.2
/*
  user edit profile coffee-script
*/


(function() {
  var list;

  list = ['jquery', 'underscore', 'filepicker', 'bootstrap', 'jquery.fileupload', 'jquery.fileupload-process', 'jquery.fileupload-resize', 'jquery.fileupload-validate', 'jquery.iframe-transport'];

  require(list, function($, _, filepicker) {
    return $(function() {
      $('#fileupload').fileupload({
        option: {
          maxFileSize: 5000000,
          acceptFileTypes: /(\.|\/)(gif|jpe?g|png|js)$/i,
          process: [
            {
              action: 'load',
              fileTypes: /^image\/(gif|jpeg|png|js)$/,
              maxFileSize: 20000000
            }, {
              action: 'resize',
              maxWidth: 1440,
              maxHeight: 900
            }, {
              action: 'save'
            }
          ]
        }
      });
      $('#fileupload').fileupload({
        url: '/upload',
        dataType: 'json',
        add: function(e, data) {
          var jqXHR;

          return jqXHR = data.submit().success(function(result, textStatus, jqXHR) {
            return console.log("result: " + JSON.stringify(result));
          }).error(function(result, textStatus, jqXHR) {
            return console.log("result: " + JSON.stringify(result));
          }).complete(function(result, textStatus, jqXHR) {
            return console.log("result: " + JSON.stringify(result));
          });
        }
      });
      /*
        filepicker.pick(function(FPFile){
                       //console.log(FPFile.url);
                      $('#file-show').attr('src',FPFile.url);
                  });
                mimetypes: ['image/*', 'text/plain'],
        container: 'modal',
        maxSize: 1024*1024,
        services:['COMPUTER'],
      */

      filepicker.setKey('AIx95TAXR36y0pnGLrXCWz');
      return $('#upload-face-btn').click(function() {
        return filepicker.pick({
          mimetypes: ['image/*', 'text/plain'],
          container: 'modal',
          services: ['COMPUTER']
        }, function(FPfile) {
          console.log(JSON.stringify(FPfile));
          $('#face-id').val(FPfile.url);
          return $('#image-face').attr('src', FPfile.url);
        });
      });
    });
  });

}).call(this);
